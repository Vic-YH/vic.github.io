<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº²çˆ±çš„ç‘å®</title>
    <style>
        /* å…¨å±€æ ·å¼è®¾ç½® */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background-color: #f5f5f7; /* iOSåŸç”ŸèƒŒæ™¯è‰² */
            font-family: "-apple-system", "BlinkMacSystemFont", "PingFang SC", "Helvetica Neue", sans-serif;
            text-align: center;
            padding: 50px 20px;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* ä¸»æ ‡é¢˜æ ·å¼ */
        h1 {
            color: #1d1d1f; /* iOSæ ‡é¢˜æ–‡å­—è‰² */
            font-size: 28px;
            margin-bottom: 30px;
            font-weight: 600;
            letter-spacing: -0.2px;
            position: relative;
            z-index: 10;
        }
        
        /* æŒ‰é’®å®¹å™¨ */
        .button-container {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-bottom: 40px;
            position: relative;
            z-index: 10;
        }
        
        /* æŒ‰é’®æ ·å¼ - iOSåŸç”Ÿé£æ ¼ */
        button {
            background-color: #007aff; /* iOSç³»ç»Ÿè“ */
            color: white;
            border: none;
            border-radius: 10px; /* iOS 15+ æŒ‰é’®åœ†è§’ */
            font-size: 17px;
            padding: 12px 24px;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        button:hover {
            transform: scale(1.02);
            opacity: 0.92;
            background-color: #0066cc;
        }
        
        button:active {
            transform: scale(0.98);
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
        }
        
        button:disabled {
            background-color: #d1d5db;
            cursor: not-allowed;
            transform: none;
            opacity: 1;
            box-shadow: none;
        }
        
        /* å¼¹çª—æ ·å¼ - iOSä¾¿ç­¾é£æ ¼ */
        .blessing-popup {
            position: fixed;
            width: 220px;
            height: 100px;
            border-radius: 12px; /* iOSä¾¿ç­¾åœ†è§’ */
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08); /* è½»è–„é˜´å½± */
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px;
            animation: bubbleIn 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
            font-size: 16px;
            z-index: 1000;
            text-align: center;
            overflow: hidden;
            background-color: white; /* åŸºç¡€ç™½è‰²èƒŒæ™¯ */
            border: 1px solid rgba(0, 0, 0, 0.05); /* ç»†è¾¹æ¡†å¢å¼ºè´¨æ„Ÿ */
            cursor: grab;
            user-select: none; /* ç¦æ­¢æ–‡æœ¬é€‰ä¸­ */
        }
        
        /* çˆ±å¿ƒå¼¹çª—ç‰¹æ®Šæ ·å¼ */
        .blessing-popup.heart {
            background-color: #fee2e2; /* ç²‰è‰²ç³»æ›´é€‚åˆçˆ±å¿ƒ */
            z-index: 1001; /* çˆ±å¿ƒå¼¹çª—ç½®äºæ™®é€šå¼¹çª—ä¹‹ä¸Š */
        }
        
        /* å¼¹çª—å¼¹å‡ºåŠ¨ç”» - æ³¡æ³¡æ¸æ˜¾æ•ˆæœ */
        @keyframes bubbleIn {
            0% {
                transform: scale(0.5);
                opacity: 0;
            }
            70% {
                transform: scale(1.05);
                opacity: 0.8;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        /* æ‹–åŠ¨æ—¶æ ·å¼ */
        .blessing-popup.dragging {
            cursor: grabbing;
            z-index: 2000; /* æ‹–åŠ¨æ—¶ç½®äºé¡¶å±‚ */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
        }
        
        /* å…³é—­æŒ‰é’®æ ·å¼ - iOSåŸç”Ÿé£æ ¼ */
        .close-btn {
            position: absolute;
            top: 6px;
            right: 6px;
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(0, 0, 0, 0.08);
            color: #6e6e73; /* iOSæ¬¡è¦æ–‡å­—è‰² */
            font-size: 13px;
            width: 22px;
            height: 22px;
            padding: 0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
            box-shadow: none;
            cursor: pointer;
        }
        
        .close-btn:hover {
            color: #1d1d1f;
            background: white;
            transform: none;
            opacity: 1;
            border-color: rgba(0, 0, 0, 0.15);
        }
        
        .close-btn:active {
            background: #f5f5f7;
        }
        
        /* ä¾¿ç­¾è‰²å½©å˜ä½“ - ä¿æŒç®€çº¦åè°ƒ */
        .blessing-popup.blue { background-color: #eef7ff; }
        .blessing-popup.green { background-color: #f0fdf4; }
        .blessing-popup.yellow { background-color: #fffbeb; }
        .blessing-popup.purple { background-color: #faf5ff; }
        .blessing-popup.pink { background-color: #fee2e2; }
        .blessing-popup.gray { background-color: #f8fafc; }
    </style>
</head>
<body>
    <h1>æ¥è‡ªå°ç°ç°çš„ç¥ç¦ï¼â¤ï¸</h1>
    <div class="button-container">
        <button id="startBtn">ç‚¹å‡»æŸ¥æ”¶</button>
    </div>

    <script>
        // è·å–æŒ‰é’®å…ƒç´ 
        const startBtn = document.getElementById('startBtn');
                
        // å®šä¹‰å¼¹çª—æ ·å¼ç±»ï¼ˆiOSä¾¿ç­¾é£æ ¼é…è‰²ï¼‰
        const popupStyles = [
            'blue', 'green', 'yellow', 'purple', 'pink', 'gray',
            'blue', 'green', 'yellow', 'purple'
        ];
        
        const normalBlessings = [
            'ä»Šå¤©çš„ä½ ä¹Ÿè¶…å¸…çš„ï¼ğŸ˜',
            'å·¥ä½œå†å¿™ä¹Ÿè¦è®°å¾—ä¼‘æ¯å‘€ğŸ˜Œ',
            'å’Œä½ åœ¨ä¸€èµ·çš„æ¯ä¸€å¤©éƒ½å¥½ç”œğŸ¬',
            'ä½ ç¬‘èµ·æ¥çš„æ—¶å€™ä¸–ç•Œéƒ½äº®äº†â˜€ï¸',
            'è°¢è°¢ä½ åŒ…å®¹æˆ‘çš„å°è„¾æ°”ğŸ™',
            'æƒ³æ¯å¤©éƒ½çªåœ¨ä½ æ€€é‡Œçœ‹ç”µå½±ğŸ¬',
            'ä½ çš„è‚©è†€æ˜¯æœ€æ¸©æš–çš„æ¸¯æ¹¾â›±ï¸',
            'è¦ä¸€ç›´åšæˆ‘çš„è¶…çº§è‹±é›„å‘€ğŸ¦¸',
            'ä¸‹æ¬¡è§é¢ä¸€å®šè¦ç´§ç´§æŠ±ä½ä½ ğŸ¤—',
            'ä½ çš„å­˜åœ¨æœ¬èº«å°±æ˜¯æˆ‘çš„å¹¸è¿ğŸ€',
            'å†å¿™ä¹Ÿè¦æŒ‰æ—¶åƒé¥­å“¦ğŸš',
            'æ¢¦è§ä½ çš„æ—¶å€™éƒ½ä¼šç¬‘å‡ºå£°ğŸ˜´',
            'å’Œä½ ç‰µæ‰‹æ•£æ­¥çš„æ—¶å…‰æœ€ç¾å¥½ğŸ‘«',
            'ä½ è®¤çœŸçš„æ ·å­çœŸçš„å¾ˆè¿·äººâœ¨',
            'æœ‰ä½ åœ¨èº«è¾¹å°±å¾ˆå®‰å¿ƒâ¤ï¸',
            'æœŸå¾…æˆ‘ä»¬çš„ä¸‹ä¸€æ¬¡æ—…è¡Œâœˆï¸',
            'ä½ åšçš„é¥­æ˜¯ä¸–ç•Œä¸Šæœ€å¥½åƒçš„ğŸ³',
            'å°±ç®—åµæ¶ä¹Ÿä¸ä¼šçœŸçš„ç”Ÿæ°”å‘€ğŸ˜œ',
            'è°¢è°¢ä½ å‡ºç°åœ¨æˆ‘çš„ç”Ÿå‘½é‡ŒğŸŒŸ',
            'æƒ³å’Œä½ ä¸€èµ·æ…¢æ…¢å˜è€ğŸ‘µğŸ‘´',
            'ä½ çš„æ€€æŠ±æ˜¯æœ€æ²»æ„ˆçš„åœ°æ–¹ğŸ’Š',
            'æ¯å¤©éƒ½æ¯”æ˜¨å¤©æ›´çˆ±ä½ ä¸€ç‚¹ğŸ’–',
            'çœ‹åˆ°ä½ å°±ä»€ä¹ˆçƒ¦æ¼éƒ½æ²¡äº†ğŸ˜‰',
            'ä½ å°±æ˜¯æˆ‘çš„å…¨ä¸–ç•Œå‘€ğŸŒ',
            'å’Œä½ åˆ†äº«çš„æ—¥å¸¸éƒ½å¾ˆçè´µğŸ“'
        ];
        
        // çˆ±å¿ƒå¼¹çª—ä¸“ç”¨ç¥ç¦ï¼ˆä¸°å¯Œå†…å®¹+æ›´å¤šè¡¨æƒ…ï¼‰
        const heartBlessings = [
            'æˆ‘çš„å¿ƒé‡Œå…¨æ˜¯ä½ â¤ï¸',
            'æ°¸è¿œçˆ±ä½ å“Ÿ~ğŸ’•',
            'ä½ æ˜¯æˆ‘çš„å”¯ä¸€ğŸ’',
            'ä¸€è¾ˆå­éƒ½è¦åœ¨ä¸€èµ·ğŸ‘©â¤ï¸ğŸ‘¨',
            'çˆ±ä½ æ— æœŸé™ğŸ’–',
            'ä½ å¡«æ»¡äº†æˆ‘çš„å¿ƒğŸ’“',
            'å¿ƒæ°¸è¿œä¸ºä½ è·³åŠ¨ğŸ’—',
            'ä¸“å±ä½ çš„çˆ±ğŸ’',
            'çˆ±æ˜¯æˆ‘ä»¬çš„æ°¸æ’ğŸ”’',
            'ä½ å°±æ˜¯æˆ‘çš„å¿ƒä¹‹æ‰€å‘ğŸ§­',
            'å¾€åä½™ç”Ÿéƒ½æ˜¯ä½ ğŸ‘«',
            'å¿ƒè·³ä¸ºä½ è€ŒåŠ é€ŸğŸ’“',
            'çˆ±æ„è—åœ¨ç»†èŠ‚é‡ŒğŸ”',
            'ä½ æ˜¯å¿ƒåŠ¨çš„ç†ç”±ğŸ’˜',
            'ä½™ç”Ÿè¯·å¤šæŒ‡æ•™å‘€ğŸ™',
            'çˆ±æ˜¯é•¿æƒ…çš„å‘Šç™½ğŸ’Œ',
            'å¿ƒä¸å¿ƒç´§ç´§ç›¸ä¾ğŸ«‚',
            'æœ‰ä½ å°±æ˜¯å…¨ä¸–ç•ŒğŸŒ',
            'çˆ±ä½ ä¸æ­¢ä¸‰åƒéğŸ”¢',
            'å¿ƒéšä½ åŠ¨ï¼Œæƒ…ä¸ºä½ ç‰µğŸ’˜'
        ];
        
        // ç‰¹æ®Šç¥ç¦å†…å®¹
        const specialBlessing = 'è¿™è¾ˆå­æœ€å¹¸è¿çš„äº‹ï¼Œå°±æ˜¯é‡è§ä½ â¤ï¸âœ¨';
        
        // ç”ŸæˆæŒ‡å®šèŒƒå›´å†…çš„éšæœºæ•´æ•°
        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }
        
        // ç”Ÿæˆçˆ±å¿ƒå½¢çŠ¶çš„åæ ‡ç‚¹ï¼ˆç¼©å°çˆ±å¿ƒå°ºå¯¸ï¼‰
        function generateHeartPoints(count, scale = 20, offsetX = 0, offsetY = 0) {
            const points = [];
            const centerX = window.innerWidth / 2 + offsetX;
            const centerY = window.innerHeight / 2 + offsetY;
            
            // è°ƒæ•´å¿ƒå½¢å¯†åº¦å’Œç¼©æ”¾æ¯”ä¾‹ï¼Œä½¿çˆ±å¿ƒæ›´å°æ›´ç²¾è‡´
            for (let i = 0; i < count; i++) {
                const t = (i / count) * Math.PI * 2;
                // å¿ƒå½¢æ›²çº¿å‚æ•°æ–¹ç¨‹
                const x = 16 * Math.pow(Math.sin(t), 3);
                const y = 13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t);
                
                // ç¼©å°çˆ±å¿ƒæ¯”ä¾‹ï¼ˆscaleä»35è°ƒæ•´ä¸º20ï¼‰
                const pointX = centerX + x * scale;
                const pointY = centerY - y * scale; // è´Ÿå·æ˜¯å› ä¸ºå±å¹•Yè½´å‘ä¸‹
                
                points.push({ x: pointX, y: pointY });
            }
            
            return points;
        }
        
        // åˆ›å»ºå•ä¸ªç¥ç¦å¼¹çª—
        function createBlessingPopup(isHeart = false, position = null) {
            // åˆ›å»ºå¼¹çª—å…ƒç´ 
            const popup = document.createElement('div');
            popup.className = 'blessing-popup';
            
            // å¦‚æœæ˜¯çˆ±å¿ƒå¼¹çª—ï¼Œæ·»åŠ ç‰¹æ®Šç±»
            if (isHeart) {
                popup.classList.add('heart');
            } else {
                // éšæœºé€‰æ‹©ä¾¿ç­¾æ ·å¼
                const randomStyle = popupStyles[getRandomInt(0, popupStyles.length - 1)];
                popup.classList.add(randomStyle);
            }
            
            // é€‰æ‹©ç¥ç¦å†…å®¹
            let blessingContent;
            if (Math.random() < 0.1) {
                blessingContent = specialBlessing;
            } else if (isHeart) {
                // çˆ±å¿ƒå¼¹çª—ä½¿ç”¨ä¸“ç”¨ç¥ç¦
                blessingContent = heartBlessings[getRandomInt(0, heartBlessings.length - 1)];
            } else {
                blessingContent = normalBlessings[getRandomInt(0, normalBlessings.length - 1)];
            }
            
            // è®¾ç½®å¼¹çª—å†…å®¹å’Œå…³é—­æŒ‰é’®
            popup.innerHTML = `
                <span>${blessingContent}</span>
                <button class="close-btn">Ã—</button>
            `;
            
            // è®¾ç½®ä½ç½®
            let leftPos, topPos;
            if (position) {
                // ä½¿ç”¨æŒ‡å®šä½ç½®ï¼ˆçˆ±å¿ƒå½¢çŠ¶ï¼‰
                leftPos = position.x - 110; // å‡å»å®½åº¦çš„ä¸€åŠä»¥å±…ä¸­
                topPos = position.y - 50;  // å‡å»é«˜åº¦çš„ä¸€åŠä»¥å±…ä¸­
            } else {
                // éšæœºä½ç½®
                const maxLeft = window.innerWidth - 220;
                const maxTop = window.innerHeight - 100;
                leftPos = getRandomInt(0, maxLeft);
                topPos = getRandomInt(0, maxTop);
            }
            
            popup.style.left = `${leftPos}px`;
            popup.style.top = `${topPos}px`;
            
            // æ·»åŠ åˆ°é¡µé¢
            document.body.appendChild(popup);
            
            // ä¸ºå…³é—­æŒ‰é’®æ·»åŠ äº‹ä»¶
            const closeBtn = popup.querySelector('.close-btn');
            closeBtn.addEventListener('click', (e) => {
                e.stopPropagation(); // é˜»æ­¢äº‹ä»¶å†’æ³¡
                popup.remove();
            });
            
            // æ·»åŠ æ‹–åŠ¨åŠŸèƒ½
            makeDraggable(popup);
        }
        
        // ä½¿å…ƒç´ å¯æ‹–åŠ¨
        function makeDraggable(element) {
            let isDragging = false;
            let offsetX, offsetY;
            let originalZIndex = element.style.zIndex;
            
            // é¼ æ ‡æŒ‰ä¸‹æ—¶å¼€å§‹æ‹–åŠ¨
            element.addEventListener('mousedown', (e) => {
                if (e.target.classList.contains('close-btn')) return;
                
                isDragging = true;
                element.classList.add('dragging');
                originalZIndex = element.style.zIndex;
                element.style.zIndex = 2000;
                
                const rect = element.getBoundingClientRect();
                offsetX = e.clientX - rect.left;
                offsetY = e.clientY - rect.top;
                
                document.body.style.userSelect = 'none';
            });
            
            // é¼ æ ‡ç§»åŠ¨æ—¶æ‹–åŠ¨å…ƒç´ 
            document.addEventListener('mousemove', (e) => {
                if (!isDragging) return;
                
                const maxLeft = window.innerWidth - element.offsetWidth;
                const maxTop = window.innerHeight - element.offsetHeight;
                
                let newLeft = e.clientX - offsetX;
                let newTop = e.clientY - offsetY;
                
                newLeft = Math.max(0, Math.min(newLeft, maxLeft));
                newTop = Math.max(0, Math.min(newTop, maxTop));
                
                element.style.left = `${newLeft}px`;
                element.style.top = `${newTop}px`;
            });
            
            // é¼ æ ‡é‡Šæ”¾æ—¶ç»“æŸæ‹–åŠ¨
            document.addEventListener('mouseup', () => {
                if (isDragging) {
                    isDragging = false;
                    element.classList.remove('dragging');
                    element.style.zIndex = originalZIndex;
                    document.body.style.userSelect = '';
                }
            });
            
            document.addEventListener('mouseleave', () => {
                if (isDragging) {
                    isDragging = false;
                    element.classList.remove('dragging');
                    element.style.zIndex = originalZIndex;
                    document.body.style.userSelect = '';
                }
            });
        }
        
        // å¼€å¯ç¥ç¦æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        startBtn.addEventListener('click', () => {
            startBtn.disabled = true;
            
            // æ€»æ•°70ä¸ªå¼¹çª—ï¼šå‰é¢50ä¸ªéšæœºåˆ†å¸ƒï¼Œæœ€å20ä¸ªç»„æˆçˆ±å¿ƒ
            const totalRandom = 80;
            const totalHeart = 25;
            const interval = 100; // å¼¹çª—é—´éš”æ—¶é—´
            
            // ç”Ÿæˆçˆ±å¿ƒåæ ‡ç‚¹ï¼ˆç¼©å°ç‰ˆçˆ±å¿ƒï¼Œscale=20ï¼‰
            const heartPoints = generateHeartPoints(totalHeart, 20, 0, -20);
            
            // åˆ›å»ºéšæœºåˆ†å¸ƒçš„å¼¹çª—
            for (let i = 0; i < totalRandom; i++) {
                setTimeout(() => createBlessingPopup(false), i * interval);
            }
            
            // åˆ›å»ºçˆ±å¿ƒå½¢çŠ¶çš„å¼¹çª—ï¼ˆåœ¨éšæœºå¼¹çª—ä¹‹åï¼‰
            for (let i = 0; i < totalHeart; i++) {
                const delay = totalRandom * interval + i * interval;
                setTimeout(() => {
                    createBlessingPopup(true, heartPoints[i]);
                }, delay);
            }
            
            // æ¢å¤æŒ‰é’®å¯ç”¨ï¼ˆæ€»æ—¶é•¿ + é¢å¤–1ç§’ï¼‰
            const totalTime = (totalRandom + totalHeart) * interval + 1000;
            setTimeout(() => {
                startBtn.disabled = false;
            }, totalTime);
        });
    </script>
</body>
</html>